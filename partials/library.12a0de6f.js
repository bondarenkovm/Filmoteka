function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequired7c6=r);var i=r("iJYdK"),s=r("iM3XI"),a=r("2Sba5"),c=r("c4xRF"),d=r("7Pc5D"),u=r("iQIUW"),l=r("ddbgU");r("hw1yE"),r("9TlK9"),r("5vpMz");var m={},f=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,y="object"==typeof t&&t&&t.Object===Object&&t,w="object"==typeof self&&self&&self.Object===Object&&self,b=y||w||Function("return this")(),L=Object.prototype.toString,M=Math.max,P=Math.min,E=function(){return b.Date.now()};function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function T(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==L.call(e)}(e))return NaN;if(F(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=F(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(f,"");var n=g.test(e);return n||h.test(e)?p(e.slice(2),n?2:8):v.test(e)?NaN:+e}m=function(e,t,n){var o,r,i,s,a,c,d=0,u=!1,l=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=o,i=r;return o=r=void 0,d=t,s=e.apply(i,n)}function v(e){return d=e,a=setTimeout(h,t),u?f(e):s}function g(e){var n=e-c;return void 0===c||n>=t||n<0||l&&e-d>=i}function h(){var e=E();if(g(e))return p(e);a=setTimeout(h,function(e){var n=t-(e-c);return l?P(n,i-(e-d)):n}(e))}function p(e){return a=void 0,m&&o?f(e):(o=r=void 0,s)}function y(){var e=E(),n=g(e);if(o=arguments,r=this,c=e,n){if(void 0===a)return v(c);if(l)return a=setTimeout(h,t),f(c)}return void 0===a&&(a=setTimeout(h,t)),s}return t=T(t)||0,F(n)&&(u=!!n.leading,i=(l="maxWait"in n)?M(T(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m),y.cancel=function(){void 0!==a&&clearTimeout(a),d=0,o=c=r=a=void 0},y.flush=function(){return void 0===a?s:p(E())},y};const S=new(0,d.LocalStorageEntry)("watchedMoviesStorage"),R=new(0,d.LocalStorageEntry)("queueMoviesStorage"),x=new(0,s.default),z=document.querySelector(".notification-wrapper"),I=document.querySelector("#watched"),N=document.querySelector("#queue");window.addEventListener("DOMContentLoaded",k),I.addEventListener("click",k),N.addEventListener("click",C);class O{get pageNumber(){return this.page}set pageNumber(e){this.page=e}get totalPagesNumber(){return this.totalPages}resize(){const e=window.innerWidth;return e!==this.viewportWidth&&(this.viewportWidth=e,e<=767&&(this.countFilmsPerPage=4),e>=768&&(this.countFilmsPerPage=8),e>=1280&&(this.countFilmsPerPage=9),!0)}calculateTotalPages(){this.movies=this.getMoviesFromLocalStorage();const e=this.movies.length,t=Math.ceil(e/this.countFilmsPerPage);this.totalPages=t}getMovies(){return[...this.movies].splice((this.page-1)*this.countFilmsPerPage,this.countFilmsPerPage)}constructor(){e(i)(this,"renderRecommendedFilms",(async()=>{const e=await x.fetchTrendMovies();(0,a.cardList)([...e].splice(0,this.countFilmsPerPage)),(0,l.animScroll)()})),this.page=1,this.resize(),this.calculateTotalPages()}}class j extends O{getMoviesFromLocalStorage(){return S.getLocalStorageEntry()||[]}constructor(...t){super(...t),e(i)(this,"renderRecommended",(async()=>{u.Notify.info("You haven't added any movie to watched yet. Let's do it!");z.innerHTML='<span class="recommended-films">Recommended films</span>',this.renderRecommendedFilms()}))}}class q extends O{getMoviesFromLocalStorage(){return R.getLocalStorageEntry()||[]}constructor(...t){super(...t),e(i)(this,"renderRecommended",(async()=>{u.Notify.info("You haven't added any movie to queue yet. Let's do it!");z.innerHTML='<span class="recommended-films">Recommended films</span>',this.renderRecommendedFilms()}))}}async function k(e){N.style.backgroundColor="transparent",I.style.backgroundColor="#ff6b01";const t=new j,n=new(0,c.default);if(!t.getMovies().length)return await t.renderRecommended(),window.onresize=m((function(){t.resize()&&t.renderRecommended()}),500),document.removeEventListener("itemInserted",C),void document.addEventListener("itemInserted",k);z.innerHTML="",n.setFunction(t.getMovies,t);const o=m((()=>{t.resize()&&(t.calculateTotalPages(),n.setFunction(t.getMovies,t))}),500);window.onresize=o,document.removeEventListener("itemInserted",C),document.addEventListener("itemInserted",k)}async function C(e){I.style.backgroundColor="transparent",N.style.backgroundColor="#ff6b01";const t=new q,n=new(0,c.default);if(!t.getMovies().length)return await t.renderRecommended(),window.onresize=m((function(){t.resize()&&t.renderRecommended()}),500),document.addEventListener("itemInserted",C),void document.removeEventListener("itemInserted",k);z.innerHTML="",n.setFunction(t.getMovies,t);const o=m((()=>{t.resize()&&(t.calculateTotalPages(),n.setFunction(t.getMovies,t))}),500);window.onresize=o,document.addEventListener("itemInserted",C),document.removeEventListener("itemInserted",k)}
//# sourceMappingURL=library.12a0de6f.js.map
